<template name="search">
  <div class="manage-users row">
    <div class="offset3 span9">
      <ul class="user-list">

        {{#each users}}
            {{#if currentUser}}
        <li>
          <div class="person" data-id="{{_id}}">

            <div class="name">
              {{#each emails}}
              <a href="#">{{address}}</a>
              {{/each}}
            </div>



            <div class="name">
              <a href="#">{{username}}</a>
            </div>

            {{#if profile.mobile}}
            <div>{{mobile}} </div>
            {{/if}}

            <div><span class="help">Click on email or any state to edit:</span>
              <ul class="state">
                {{#each state}}
                <li><span class="state">{{.}}</span></li>
                {{/each}}
              </ul>
            </div>

          </div>
        </li>


            {{/if}}
        {{/each}}
      </ul>


      {{> editSearchForm}}





    </div>
  </div>
</template>

<template name="editSearchForm">
  <div id="user-state" class="modal hide fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <form id="manage-state-form">

      <div class="modal-header">
        <h3 id="myModalLabel">States</h3>
      </div>

      <div class="modal-body">
        {{#with user}}
        <input type="hidden" id="_id" name="_id" value="{{_id}}" />

        <div>
          <h4>{{#each emails}}{{address}} {{/each}}</h4>
          <h4>{{username}}</h4>
        </div>

        <br />
        <select id="state" name="state" multiple>
          {{#each allState}}
          <option value="{{.}}">{{.}}</option>
          {{/each}}
        </select>
        {{/with}}
      </div>


      <div class="modal-footer">
        <button id="cancelChanges" class="btn">Cancel</button>
        <button id="saveChanges" class="btn btn-primary">Save changes</button>
      </div>
    </form>
  </div>
</template>


